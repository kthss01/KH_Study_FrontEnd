<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>객체</title>
    <style>
        .area {
            border: 1px solid red;
            height: 200px;
        }

        .area-big {
            border: 1px solid red;
            height: 400px;
        }
    </style>
</head>
<body>
    <h1>객체</h1>
    <h3>객체의 선언 및 호출</h3>
    <p> 객체는 키값을 사용하여 속성을 식별한다.<br>
        중괄호{}를 사용해서 객체를 생성하고 속성에는 모든 자료형이 올수있다. 
        자바스크립트에서 객체는 프로퍼티의 집합
        프로퍼티는 STRING 타입의 이름 과 속성리스트 를 가짐
        프로퍼티는 "키" : "값" 의 형식으로 지정
        </p>
    <pre>
        var 객체 = {
            속성명 : 속성값,-- 프로퍼티
            속성명 : 속성값,
            ...

            key : value 형태!!
        };

  
    </pre>  

    <button onclick="test1();">실행확인</button>
    <div id="area1" class="area-big"></div>
    <script>
        function test1() {
            // 객체 생성 방법1 : 리터럴
            // 방법이 엄청 많음 ecma6 에 추가된 클래스로도 만들 수 있음
            var product = {
                pName: 'Dry Mango',
                type: 'snack',
                ingredient: ['mango', 'sugar'],
                origin: 'pilippines'
            };

            console.log(product);

            var area1 = document.getElementById("area1");
            area1.innerHTML += "product : " + product + "<br>";

            // 해당 객체의 각 속성에 접근하는 방법
            // 1. 객체명.속성명
            area1.innerHTML += "<br> 객체명.속성명으로 접근하기 </b><br>";
            area1.innerHTML += "product.pName : " + product.pName + "<br>";
            area1.innerHTML += "product.type : " + product.type + "<br>";
            area1.innerHTML += "product.ingredient : " + product.ingredient + "<br>";
            area1.innerHTML += "product.ingredient[0] : " + product.ingredient[0] + "<br>";
            area1.innerHTML += "product.ingredient[1] : " + product.ingredient[1] + "<br>";
            area1.innerHTML += "product.origin : " + product.origin + "<br>";

            // 2. 객체명['속성명']
            area1.innerHTML += "<br> 객체명['속성명']으로 접근하기 </b><br>";
            area1.innerHTML += "product['pName'] : " + product['pName'] + "<br>";
            area1.innerHTML += "product.['type'] : " + product['type'] + "<br>";
            area1.innerHTML += "product.['ingredient'] : " + product['ingredient'] + "<br>";
            area1.innerHTML += "product.['ingredient[0]'] : " + product['ingredient'][0] + "<br>";
            area1.innerHTML += "product.['ingredient[1]'] : " + product['ingredient'][1] + "<br>";
            area1.innerHTML += "product.['origin'] : " + product['origin'] + "<br>";
        }
    </script>
    
    <h3>객체의 식별자테스트</h3>
    <div id="area2" class="area"></div>

    <button onclick="test2();">실행확인</button>

    <script>
        function test2() {
            var objTest = {
                // 속성명 제시시 공백이나 특수문자가 들어간 경우 "", ''로 묶어줘야 한다.
                'I love' : '남주혁',
                "I hate 1#$%^&()" : "유야호"
            };

            console.log(objTest);

            var area2 = document.getElementById("area2");
            // area2.innerHTML += "I love : " + objTest.'I love' + "<br>"; // 이렇게는 안됨
            area2.innerHTML += "I love : " + objTest['I love'] + "<br>";
            area2.innerHTML += "I hate 1#$%^&() : " + objTest['I hate 1#$%^&()'] + "<br>";
        }
    </script>

    <h3>객체의 메소드 속성</h3>
    <div id="area3" class="area"></div>
    <p>객체의 속성 중 함수 자료형인 속성을 메소드라고 한다.</p>

    <button onclick="test3();">실행확인</button>

    <script>
        function test3() {

            var area3 = document.getElementById("area3");

            var dog = {
                name : "바둑이",
                eat : function(food) {
                    // 객체내 함수에서 객체 속성 사용시 this 사용해야함
                    area3.innerHTML += this.name + '가 ' + food + "를 먹고 있어요 멍멍!!";
                }
            }

            console.log(dog);
            dog.eat('밥');
        }
    </script>

    <h3>객체와 반복문</h3>
    <div id="area4" class="area"></div>
    <p>객체의 속성을 살펴볼 때는 단순 for문, while문은 접근 불가능하고 forin문 사용</p>

    <button onclick="test4();">실행확인</button>

    <script>
        function test4() {
            var product = {
                pName: 'Dry Mango',
                type: 'snack',
                ingredient: ['mango', 'sugar'],
                origin: 'pilippines'
            };

            console.log(product);

            var area4 = document.getElementById("area4");
            for (var key in product) {
                area4.innerHTML += key + " : " + product[key] + "<br>";
                // 속성 key를 찾음 이렇게는 접근 불가
                // area4.innerHTML += key + " : " + product.key + "<br>"; // undefined 뜸
            }
        }
    </script>

    <h3>in 과 with 키워드</h3>
    <p>in : 객체 내부에 해당 속성이 있는지 확인하는 키워드 <br>
        with : 코드를 줄여주는 키워드, 호출시 객체명을 생략할 수 있게 한다.
    </p>

    <label>이름 : </label> <input type="text" id="name"> <br>
    <label>국어 : </label> <input type="text" id="kor"> <br>
    <label>영어 : </label> <input type="text" id="eng"> <br>
    <label>수학 : </label> <input type="text" id="math"> <br>

    <button onclick="test5();">실행확인</button>
    <div id="area5" class="area"></div>

    <script>
        function test5() {
            var area5 = document.getElementById("area5");
            var name = document.getElementById("name").value;
            var kor = parseInt(document.getElementById("kor").value);
            var eng = parseInt(document.getElementById("eng").value);
            var math = parseInt(document.getElementById("math").value);

            var student = {
                name: name,
                kor: kor,
                eng: eng,
                math: math
            };

            console.log(student);

            area5.innerHTML += "student 객체에 name 속성이 있는지 확인 : " + ('name' in student) + "<br>";
            area5.innerHTML += "student 객체에 sum 속성이 있는지 확인 : " + ('sum' in student) + "<br>";

            with (student) {
                area5.innerHTML += "학생이름 : " + name + "<br>";
                area5.innerHTML += "국어점수 : " + kor + "<br>";
                area5.innerHTML += "수학점수 : " + eng + "<br>";
                area5.innerHTML += "영어점수 : " + math + "<br>";
                area5.innerHTML += "총점 : " + (kor + eng + math) + "<br>";
                area5.innerHTML += "평균 : " + ((kor + eng + math) / 3) + "<br>";
            }
        }
    </script>

    <h3>객체와 속성 추가와 제거</h3>
    <div id="area6" class="area"></div>
    <p>처음 객체를 생성하고 이후 속성을 추가하거나 제거하는 것을 동적으로 할 수 있다.</p>

    <button onclick="test6();">실행확인</button>

    <script>
        function test6() {

            var area6 = document.getElementById("area6");
            var student = {};
            
            console.log(student);
            
            student.name = "유재석";
            student.hobby = "낚시";
            student.strength = "귀여움";
            student.dream = "어부";
            
            console.log(student);
            console.log(student.toString());

            // toString 재정의된 거
            student.toString = function() {
                var str = "";
                for (var key in this) {
                    if (key !== "toString") {
                        str += key + " : " + this[key] + "<br>";
                    }
                }
                return str;
            }

            console.log(student.toString());
            // console.log(student.toString);
            // toString 재정의하면 student로만 호출해도 됨
            console.log(student);

            area6.innerHTML += student.toString();
            area6.innerHTML += "student : <br> " + student + "<br>";

            delete (student.name);
            area6.innerHTML = student;
        }
    </script>
</body>
</html>